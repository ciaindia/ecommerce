<!-- Product API CRUD Testing Interface -->
<!-- Copy this entire code and paste into WordPress Custom HTML block or page -->

<style>
    .api-testing-container {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        max-width: 1200px;
        margin: 40px auto;
        padding: 0 20px;
    }

    .api-header-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 40px;
        border-radius: 16px;
        text-align: center;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .api-header-section h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        font-weight: 700;
    }

    .api-header-section p {
        opacity: 0.95;
        font-size: 1.2rem;
    }

    .api-operation-card {
        background: white;
        margin-bottom: 30px;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        border: 2px solid #e0e0e0;
        transition: all 0.3s ease;
    }

    .api-operation-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }

    .api-operation-header {
        background: #f8f9fa;
        padding: 20px 25px;
        border-bottom: 2px solid #e0e0e0;
        display: flex;
        align-items: center;
        gap: 15px;
        flex-wrap: wrap;
    }

    .http-method {
        padding: 8px 18px;
        border-radius: 6px;
        font-weight: bold;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        text-transform: uppercase;
    }

    .http-get { background: #28a745; color: white; }
    .http-post { background: #007bff; color: white; }
    .http-put { background: #ffc107; color: black; }
    .http-delete { background: #dc3545; color: white; }

    .api-endpoint-text {
        font-family: 'Courier New', monospace;
        font-size: 1.1rem;
        font-weight: 600;
        color: #333;
    }

    .api-operation-body {
        padding: 30px;
    }

    .api-description {
        color: #666;
        margin-bottom: 25px;
        font-size: 1.05rem;
        line-height: 1.6;
    }

    .input-field-group {
        margin-bottom: 20px;
    }

    .input-field-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
        font-size: 0.95rem;
    }

    .input-field-group input {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s;
    }

    .input-field-group input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .input-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 25px;
    }

    .api-submit-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 14px 35px;
        border-radius: 8px;
        font-size: 1.05rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .api-submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
    }

    .api-submit-btn:active {
        transform: translateY(0);
    }

    .curl-section-label {
        color: #666;
        font-size: 0.9rem;
        margin-top: 25px;
        margin-bottom: 8px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .curl-code-block {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 20px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        overflow-x: auto;
        line-height: 1.7;
        margin-bottom: 20px;
    }

    .api-response-container {
        margin-top: 25px;
        padding: 25px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #667eea;
        display: none;
    }

    .api-response-container.visible {
        display: block;
        animation: fadeSlideIn 0.4s ease-out;
    }

    @keyframes fadeSlideIn {
        from {
            opacity: 0;
            transform: translateY(-15px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .api-response-container h4 {
        margin-bottom: 15px;
        color: #333;
        font-size: 1.1rem;
        font-weight: 600;
    }

    .api-response-container pre {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 20px;
        border-radius: 6px;
        overflow-x: auto;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        line-height: 1.6;
        margin: 0;
    }

    .response-success {
        border-left-color: #28a745;
    }

    .response-error {
        border-left-color: #dc3545;
    }

    @media (max-width: 768px) {
        .api-header-section h1 {
            font-size: 1.8rem;
        }
        
        .api-operation-header {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .input-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="api-testing-container">
    <div class="api-header-section">
        <h1>üõçÔ∏è Product API Testing Interface</h1>
        <p>Test all CRUD operations with live API calls</p>
    </div>

    <!-- SAMPLE OUTPUT SECTION -->
    <div class="api-operation-card" style="border: 3px solid #667eea; background: #f0f4ff;">
        <div class="api-operation-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <span style="font-size: 1.5rem;">üìã</span>
            <span style="font-size: 1.2rem; font-weight: 700;">Sample API Responses</span>
        </div>
        <div class="api-operation-body">
            <p class="api-description" style="font-weight: 600; color: #333;">Below are example responses you'll receive from each API endpoint:</p>
            
            <!-- GET ALL PRODUCTS SAMPLE -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #28a745; margin-bottom: 10px; font-size: 1.1rem;">‚úÖ GET /products - Success Response</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 200 OK</div>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6;">[
  {
    "id": 1,
    "title": "Laptop",
    "price": 80000,
    "stock": 10
  },
  {
    "id": 2,
    "title": "Mouse",
    "price": 500,
    "stock": 100
  }
]</pre>
            </div>

            <!-- GET SINGLE PRODUCT SAMPLE -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #28a745; margin-bottom: 10px; font-size: 1.1rem;">‚úÖ GET /products/1 - Success Response</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 200 OK</div>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6;">{
  "id": 1,
  "title": "Laptop",
  "price": 80000,
  "stock": 10
}</pre>
            </div>

            <!-- GET PRODUCT NOT FOUND -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #dc3545; margin-bottom: 10px; font-size: 1.1rem;">‚ùå GET /products/999 - Error Response</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 404 Not Found</div>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6;">{
  "message": "Product not found"
}</pre>
            </div>

            <!-- POST CREATE PRODUCT SAMPLE -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #007bff; margin-bottom: 10px; font-size: 1.1rem;">‚úÖ POST /products - Success Response</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 201 Created</div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 10px; border-left: 4px solid #007bff;">
                    <strong>Request Body:</strong>
                    <pre style="background: #fff; padding: 10px; margin-top: 8px; border-radius: 4px;">{
  "title": "Keyboard",
  "price": 1500,
  "stock": 50
}</pre>
                </div>
                <strong>Response:</strong>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6; margin-top: 8px;">{
  "id": 3,
  "title": "Keyboard",
  "price": 1500,
  "stock": 50
}</pre>
            </div>

            <!-- POST VALIDATION ERROR -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #dc3545; margin-bottom: 10px; font-size: 1.1rem;">‚ùå POST /products - Validation Error</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 400 Bad Request</div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 10px; border-left: 4px solid #dc3545;">
                    <strong>Request Body (Missing fields):</strong>
                    <pre style="background: #fff; padding: 10px; margin-top: 8px; border-radius: 4px;">{
  "title": "Keyboard"
}</pre>
                </div>
                <strong>Response:</strong>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6; margin-top: 8px;">{
  "message": "All fields are required"
}</pre>
            </div>

            <!-- PUT UPDATE PRODUCT SAMPLE -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #ffc107; margin-bottom: 10px; font-size: 1.1rem;">‚úÖ PUT /products/1 - Success Response</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 200 OK</div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 10px; border-left: 4px solid #ffc107;">
                    <strong>Request Body (Partial update):</strong>
                    <pre style="background: #fff; padding: 10px; margin-top: 8px; border-radius: 4px;">{
  "price": 75000
}</pre>
                </div>
                <strong>Response:</strong>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6; margin-top: 8px;">{
  "id": 1,
  "title": "Laptop",
  "price": 75000,
  "stock": 10
}</pre>
            </div>

            <!-- PUT PRODUCT NOT FOUND -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #dc3545; margin-bottom: 10px; font-size: 1.1rem;">‚ùå PUT /products/999 - Error Response</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 404 Not Found</div>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6;">{
  "message": "Product not found"
}</pre>
            </div>

            <!-- DELETE PRODUCT SAMPLE -->
            <div style="margin-bottom: 30px;">
                <h3 style="color: #dc3545; margin-bottom: 10px; font-size: 1.1rem;">‚úÖ DELETE /products/2 - Success Response</h3>
                <div class="curl-code-block" style="background: #1e1e1e;">Status: 200 OK</div>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6;">{
  "message": "Product deleted successfully"
}</pre>
            </div>

            <!-- NETWORK ERROR -->
            <div style="margin-bottom: 10px;">
                <h3 style="color: #dc3545; margin-bottom: 10px; font-size: 1.1rem;">‚ùå Network/Connection Error</h3>
                <div style="background: #fff3cd; padding: 15px; border-radius: 6px; border-left: 4px solid #ffc107;">
                    <strong>‚ö†Ô∏è Common Issue:</strong> Server not running on http://localhost:3000
                </div>
                <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.6; margin-top: 8px;">{
  "error": "Failed to fetch"
}</pre>
            </div>
        </div>
    </div>

    <!-- GET ALL PRODUCTS -->
    <div class="api-operation-card">
        <div class="api-operation-header">
            <span class="http-method http-get">GET</span>
            <span class="api-endpoint-text">/products</span>
        </div>
        <div class="api-operation-body">
            <p class="api-description">Retrieve all products from the inventory.</p>
            <button class="api-submit-btn" onclick="getAllProducts()">Get All Products</button>
            <div class="curl-section-label">cURL Command:</div>
            <div class="curl-code-block">curl http://localhost:3000/products</div>
            <div id="response-getall" class="api-response-container">
                <h4>Response:</h4>
                <pre id="result-getall"></pre>
            </div>
        </div>
    </div>

    <!-- GET SINGLE PRODUCT -->
    <div class="api-operation-card">
        <div class="api-operation-header">
            <span class="http-method http-get">GET</span>
            <span class="api-endpoint-text">/products/:id</span>
        </div>
        <div class="api-operation-body">
            <p class="api-description">Retrieve a specific product by its ID.</p>
            <div class="input-field-group">
                <label for="getProductId">Product ID:</label>
                <input type="number" id="getProductId" placeholder="Enter product ID (e.g., 1)" value="1">
            </div>
            <button class="api-submit-btn" onclick="getProductById()">Get Product</button>
            <div class="curl-section-label">cURL Command:</div>
            <div class="curl-code-block">curl http://localhost:3000/products/1</div>
            <div id="response-getone" class="api-response-container">
                <h4>Response:</h4>
                <pre id="result-getone"></pre>
            </div>
        </div>
    </div>

    <!-- CREATE PRODUCT -->
    <div class="api-operation-card">
        <div class="api-operation-header">
            <span class="http-method http-post">POST</span>
            <span class="api-endpoint-text">/products</span>
        </div>
        <div class="api-operation-body">
            <p class="api-description">Create a new product in the inventory.</p>
            <div class="input-grid">
                <div class="input-field-group">
                    <label for="createTitle">Title:</label>
                    <input type="text" id="createTitle" placeholder="e.g., Keyboard" value="Keyboard">
                </div>
                <div class="input-field-group">
                    <label for="createPrice">Price:</label>
                    <input type="number" id="createPrice" placeholder="e.g., 1500" value="1500">
                </div>
                <div class="input-field-group">
                    <label for="createStock">Stock:</label>
                    <input type="number" id="createStock" placeholder="e.g., 50" value="50">
                </div>
            </div>
            <button class="api-submit-btn" onclick="createProduct()">Create Product</button>
            <div class="curl-section-label">cURL Command:</div>
            <div class="curl-code-block">curl -X POST http://localhost:3000/products \<br>  -H "Content-Type: application/json" \<br>  -d '{"title":"Keyboard","price":1500,"stock":50}'</div>
            <div id="response-create" class="api-response-container">
                <h4>Response:</h4>
                <pre id="result-create"></pre>
            </div>
        </div>
    </div>

    <!-- UPDATE PRODUCT -->
    <div class="api-operation-card">
        <div class="api-operation-header">
            <span class="http-method http-put">PUT</span>
            <span class="api-endpoint-text">/products/:id</span>
        </div>
        <div class="api-operation-body">
            <p class="api-description">Update an existing product. Leave fields empty to keep current values.</p>
            <div class="input-field-group">
                <label for="updateId">Product ID:</label>
                <input type="number" id="updateId" placeholder="Enter product ID to update" value="1">
            </div>
            <div class="input-grid">
                <div class="input-field-group">
                    <label for="updateTitle">Title (optional):</label>
                    <input type="text" id="updateTitle" placeholder="New title">
                </div>
                <div class="input-field-group">
                    <label for="updatePrice">Price (optional):</label>
                    <input type="number" id="updatePrice" placeholder="New price" value="75000">
                </div>
                <div class="input-field-group">
                    <label for="updateStock">Stock (optional):</label>
                    <input type="number" id="updateStock" placeholder="New stock">
                </div>
            </div>
            <button class="api-submit-btn" onclick="updateProduct()">Update Product</button>
            <div class="curl-section-label">cURL Command:</div>
            <div class="curl-code-block">curl -X PUT http://localhost:3000/products/1 \<br>  -H "Content-Type: application/json" \<br>  -d '{"price":75000}'</div>
            <div id="response-update" class="api-response-container">
                <h4>Response:</h4>
                <pre id="result-update"></pre>
            </div>
        </div>
    </div>

    <!-- DELETE PRODUCT -->
    <div class="api-operation-card">
        <div class="api-operation-header">
            <span class="http-method http-delete">DELETE</span>
            <span class="api-endpoint-text">/products/:id</span>
        </div>
        <div class="api-operation-body">
            <p class="api-description">Delete a product from the inventory.</p>
            <div class="input-field-group">
                <label for="deleteId">Product ID:</label>
                <input type="number" id="deleteId" placeholder="Enter product ID to delete" value="2">
            </div>
            <button class="api-submit-btn" onclick="deleteProduct()">Delete Product</button>
            <div class="curl-section-label">cURL Command:</div>
            <div class="curl-code-block">curl -X DELETE http://localhost:3000/products/2</div>
            <div id="response-delete" class="api-response-container">
                <h4>Response:</h4>
                <pre id="result-delete"></pre>
            </div>
        </div>
    </div>
</div>

<script>
    const API_URL = 'http://localhost:3000';

    function showResponse(elementId, data, isError = false) {
        const responseBox = document.getElementById(`response-${elementId}`);
        const resultBox = document.getElementById(`result-${elementId}`);
        
        responseBox.classList.add('visible');
        responseBox.classList.remove('response-success', 'response-error');
        responseBox.classList.add(isError ? 'response-error' : 'response-success');
        
        resultBox.textContent = JSON.stringify(data, null, 2);
    }

    async function getAllProducts() {
        try {
            const response = await fetch(`${API_URL}/products`);
            const data = await response.json();
            showResponse('getall', data);
        } catch (error) {
            showResponse('getall', { error: error.message }, true);
        }
    }

    async function getProductById() {
        const id = document.getElementById('getProductId').value;
        try {
            const response = await fetch(`${API_URL}/products/${id}`);
            const data = await response.json();
            showResponse('getone', data, !response.ok);
        } catch (error) {
            showResponse('getone', { error: error.message }, true);
        }
    }

    async function createProduct() {
        const title = document.getElementById('createTitle').value;
        const price = parseFloat(document.getElementById('createPrice').value);
        const stock = parseInt(document.getElementById('createStock').value);

        try {
            const response = await fetch(`${API_URL}/products`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, price, stock })
            });
            const data = await response.json();
            showResponse('create', data, !response.ok);
        } catch (error) {
            showResponse('create', { error: error.message }, true);
        }
    }

    async function updateProduct() {
        const id = document.getElementById('updateId').value;
        const title = document.getElementById('updateTitle').value;
        const price = document.getElementById('updatePrice').value;
        const stock = document.getElementById('updateStock').value;

        const updateData = {};
        if (title) updateData.title = title;
        if (price) updateData.price = parseFloat(price);
        if (stock) updateData.stock = parseInt(stock);

        try {
            const response = await fetch(`${API_URL}/products/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(updateData)
            });
            const data = await response.json();
            showResponse('update', data, !response.ok);
        } catch (error) {
            showResponse('update', { error: error.message }, true);
        }
    }

    async function deleteProduct() {
        const id = document.getElementById('deleteId').value;
        try {
            const response = await fetch(`${API_URL}/products/${id}`, {
                method: 'DELETE'
            });
            const data = await response.json();
            showResponse('delete', data, !response.ok);
        } catch (error) {
            showResponse('delete', { error: error.message }, true);
        }
    }
</script>
